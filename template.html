<!doctype html>
<html lang=uk>

<meta charset=utf-8>
<meta name=viewport content="width=device-width, initial-scale=1.0">

<meta
  http-equiv=Content-Security-Policy
  content="
    default-src 'self';
    style-src 'self' 'unsafe-inline';
    script-src 'self' 'unsafe-inline';
  "
>

<title>Коляда</title>
<link rel=stylesheet href=css/index.css>

<div id=content>
	<main>
		<h1>Коляда</h1>

		<nav id=зміст aria-labelledby=h-зміст>
			<h2 id=h-зміст>Зміст</h2>
			<section id=зміст-колядки aria-labelledby=h-зміст-колядки>
				<h3 id=h-зміст-колядки>Колядки</h3>
				<ol></ol>
			</section>

			<section id=зміст-віншування aria-labelledby=h-зміст-віншування>
				<h3 id=h-зміст-віншування>Віншування</h3>
				<ol></ol>
			</section>
		</nav>

		<section id=колядки aria-labelledby=h-колядки>
			<h2 id=h-колядки>Колядки</h2>
		</section>

		<section id=віншування aria-labelledby=h-віншування>
			<h2 id=h-віншування>Віншування</h2>
		</section>
	</main>
</div>

<script type=module>
	const observer = new IntersectionObserver(entries => {
		entries.forEach(({ target, isIntersecting }) => {
			const $navItem = document.querySelector(`nav [href="#${target.id}"]`)
			if ($navItem == null) return;

			$navItem.classList.toggle('active', isIntersecting)
		})
	}, {
		rootMargin: '-50%',
		thresholds: [0, 1],
	})

	document.querySelectorAll('article[id]').forEach($ => observer.observe($))
</script>
